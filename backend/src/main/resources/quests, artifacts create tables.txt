CREATE TABLE logins
(
    id serial NOT NULL PRIMARY KEY,
    login varchar(30) NOT NULL,
    password varchar(30) NOT NULL

);

CREATE TABLE students
(
    id serial NOT NULL PRIMARY KEY,
    logins_id integer NOT NULL REFERENCES logins(id),
    name varchar(30) NOT NULL,
    surname varchar(60) NOT NULL,
    email varchar(45) NOT NULL
);

CREATE TABLE mentors
(
    id serial NOT NULL PRIMARY KEY,
    logins_id integer NOT NULL REFERENCES logins(id),
    name varchar(30) NOT NULL,
    surname varchar(60) NOT NULL,
    email varchar(45) NOT NULL,
    city varchar(60) NOT NULL,
    begin_work date NOT NULL
);

CREATE TABLE admins
(
    id serial PRIMARY KEY,
    logins_id integer NOT NULL REFERENCES logins(id),
    name varchar(30) NOT NULL,
    surname varchar(60) NOT NULL,
    email varchar(45) NOT NULL
);

-- Table: quests_completed

-- DROP TABLE quests_completed;

CREATE TABLE quests_completed
(
  id_student integer REFERENCES students(id),
  id_quest integer REFERENCES quests(id),  
  date date DEFAULT current_date
);

-----------------------------------------

-- Table: quests

-- DROP TABLE quests

CREATE TABLE quests
(
  id_quest integer NOT NULL UNIQUE,
  name text UNIQUE,
  description varchar(150),
  reward integer,
  creator_id integer REFERENCES mentors(id),
  modified_by integer REFERENCES mentors(id)
);

---------------------------------------------

-- Table: artifacts_unlocked

-- DROP TABLE artifacts_unlocked;

CREATE TABLE artifacts_unlocked
(
  id_student integer REFERENCES students(id),
  id_artifact integer REFERENCES artifacts(id_artifact),  
  date date DEFAULT CURRENT_DATE
);

-----------------------------------------

-- Table: artifacts

-- DROP TABLE artifacts

CREATE TABLE artifacts
(
  id_artifact integer NOT NULL UNIQUE,
  name text UNIQUE,
  description varchar(150),
  price integer,
  creator_id integer REFERENCES mentors(id),
  modified_by integer REFERENCES mentors(id)
);



CREATE TABLE levels (
	id SERIAL PRIMARY KEY ,
	userId integer REFERENCES students(id),
	level integer,
	experience integer
	);


CREATE TABLE ranks ( 
	level integer UNIQUE,
	experienceRequired integer UNIQUE
	);

CREATE TABLE achievements (
	id SERIAL PRIMARY KEY,
	name varchar(30) UNIQUE,
	description varchar(100) NOT NULL,
	experience integer NOT NULL,
	tier integer
	);

CREATE TABLE achievements_completed (
	id_student integer REFERENCES students(id),
	id_achievement integer REFERENCES achievements(id) NOT NULL,
	date Date DEFAULT CURRENT_DATE
	);
